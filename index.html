<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <!--- <script src="//unpkg.com/aplinejs"></script> -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>
    <script src="pizza.js"></script>
    <link rel="stylesheet" href="style.css">
    
</head>


<body x-data="pizzaCart">
<div class="container">
    <h1 x-text="title"></h1>


    <div class="Cart">
        <div>
            <div>
                Username: <input type="text" x-model="username">
                <button x-on:click="login" x-show="username">Login</button>
                <button x-on:click="logout" x-show="username && cartId">Logout</button>
            </div>
            <div x-show="cartId">
                Cart code: <span x-text="cartId"></span>
           </div>
          </div>


<div x-show="cartTotal > 0">
    <h2><i>YOUR CART</i></h2>
    <div class="message" x-text="message">message here</div>
    <table class="pizza-table">
        <thead>
            <tr>
                <th>Flavour</th>
                <th>Size</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            <template x-for="pizza in cartPizzas" :key="pizza.id">
                <tr>
                    <td x-text="pizza.flavour"></td>
                    <td x-text="pizza.size"></td>
                    <td>R <span x-text="pizza.price.toFixed(2)"></span></td>
                    <td>
                        <button class="qty-button" x-on:click="addPizzaToCart(pizza.id)">+</button>
                        <span x-text="pizza.qty"></span>
                        <button class="qty-button" x-on:click="removePizzaFromCart(pizza.id)">-</button>
                    </td>
                    <td>R <span x-text="pizza.total.toFixed(2)"></span></td>
                </tr>
            </template>
            <tr class="total-row">
                <td colspan="4" class="total-label">Total</td>
                <td class="total-amount">R <span x-text="cartTotal.toFixed(2)"></span></td>
            </tr>
            <tr>
                <td colspan="4" class="pay-now-label">Pay Now</td>
                <td>
                    <input class="payment-input" x-model="paymentAmount" type="number" step="0.01">
                    <button class="pay-button" x-on:click="payForCart()">Pay</button>
                    
                </td>
            </tr>
        </tbody>
    </table>
    <div x-show="message === 'Payment received!'">
        <b>Enjoy your pizza, Here's your change: R</b><span x-text="(parseInt(paymentAmount) - cartTotal).toFixed(2)"></span>
    </div>


    <div class="featured-pizzas" x-show="username && cartId">
        <h2>Featured Pizzas</h2>
        <div class="featured-pizza-list">
            <template x-for="pizza in featuredPizzas">
                <div class="featured-pizza">
                    <h3 x-text="pizza.flavour"></h3>
                    <img :src="pizza.jpeg" alt="Pizza Image" class="pizza-image">
                    <p>Size: <span x-text="pizza.size"></span></p>
                    <p>Price: R <span x-text="pizza.price.toFixed(2)"></span></p>
                    <button class="btn" x-on:click="addPizzaToCart(pizza.id)">Add to Cart</button>
                </div>
        </template>
    </div>

   
</div>
</div>

<div class="pizza" x-show="username && cartId">
    <h2>Pizzas</h2>
<template x-for="pizza in pizzas">
    <div class="pizza">
        <h5 x-text="pizza.flavour" ></h5>
        <span x-text="pizza.id" ></span> 
        <span x-text="pizza.size" ></span> 
       <strong>R<span x-text="pizza.price" ></span></strong>
       <div class="pizza-image">
        <img : src="pizza.jpeg" alt="Pizza image" width="120 px">
        <p><i> Enjoy our nice delicous pizza. </i></p>
    </div>


       <div>
        <button class="btn" x-on:click="addPizzaToCart(pizza.id)">Add to cart</button>
         </div>
       </div>
    </div>
    </div>
</template>
    </div>
</body>
</html>